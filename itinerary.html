<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Itinerary - AI Travel Planner</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 12px 24px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 32px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 16px;
            font-weight: 700;
            color: #0f172a;
            text-decoration: none;
        }

        .logo i {
            color: #22c55e;
        }

        .nav-links {
            display: flex;
            gap: 24px;
        }

        .nav-links a {
            font-size: 14px;
            font-weight: 500;
            color: #64748b;
            text-decoration: none;
            transition: color 0.2s;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: #22c55e;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f1f5f9;
            padding: 10px 16px;
            border-radius: 999px;
            width: 220px;
        }

        .search-box i {
            color: #94a3b8;
        }

        .search-box input {
            border: none;
            background: transparent;
            outline: none;
            font-size: 14px;
            width: 100%;
        }

        .header-icons {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-icons button {
            width: 40px;
            height: 40px;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            background: white;
            color: #64748b;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #f97316, #ea580c);
            border-radius: 50%;
        }

        /* Main Layout */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px;
            display: grid;
            grid-template-columns: 240px 1fr 300px;
            gap: 24px;
        }

        /* Left Sidebar */
        .left-sidebar {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .itinerary-nav {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .nav-header {
            color: #22c55e;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .nav-subtitle {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 16px;
        }

        .day-nav-list {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .day-nav-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border-radius: 10px;
            font-size: 14px;
            color: #64748b;
            cursor: pointer;
            transition: all 0.2s;
        }

        .day-nav-item:hover {
            background: #f1f5f9;
        }

        .day-nav-item.active {
            background: #22c55e;
            color: white;
        }

        .day-nav-item i {
            font-size: 14px;
        }

        .nav-divider {
            height: 1px;
            background: #e2e8f0;
            margin: 12px 0;
        }

        /* Price Card */
        .price-card {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border-radius: 16px;
            padding: 20px;
            color: white;
        }

        .price-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .price-label {
            font-size: 12px;
            font-weight: 500;
            opacity: 0.9;
        }

        .savings-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 999px;
            font-size: 11px;
            font-weight: 600;
        }

        .price-amount {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 4px;
        }

        .price-amount span {
            font-size: 16px;
            font-weight: 500;
            opacity: 0.9;
        }

        .price-details {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 16px;
        }

        .btn-book {
            width: 100%;
            background: white;
            color: #16a34a;
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-book:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        /* Main Content */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* Trip Header */
        .trip-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
        }

        .trip-title {
            font-size: 28px;
            font-weight: 800;
            color: #0f172a;
            margin-bottom: 8px;
        }

        .trip-meta {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 14px;
            color: #64748b;
        }

        .trip-meta span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-export {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: white;
            font-size: 14px;
            font-weight: 600;
            color: #0f172a;
            cursor: pointer;
        }

        .btn-export i {
            color: #22c55e;
        }

        /* Day Section */
        .day-section {
            margin-bottom: 32px;
        }

        .day-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .day-number {
            width: 40px;
            height: 40px;
            background: #e0f2fe;
            color: #0284c7;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 700;
        }

        .day-info h2 {
            font-size: 20px;
            font-weight: 700;
            color: #0f172a;
        }

        .day-info p {
            font-size: 14px;
            color: #64748b;
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 20px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e2e8f0;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 24px;
        }

        .timeline-dot {
            position: absolute;
            left: -16px;
            top: 20px;
            width: 12px;
            height: 12px;
            background: #22c55e;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 0 0 2px #22c55e;
        }

        .activity-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-left: 16px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            display: flex;
            gap: 20px;
        }

        .activity-content {
            flex: 1;
        }

        .activity-badges {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }

        .badge {
            font-size: 11px;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 999px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-sightseeing {
            background: #dcfce7;
            color: #16a34a;
        }

        .badge-dining {
            background: #fef3c7;
            color: #d97706;
        }

        .badge-high-rated {
            background: #dbeafe;
            color: #2563eb;
        }

        .activity-title {
            font-size: 18px;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: 8px;
        }

        .activity-time {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: #64748b;
            margin-bottom: 12px;
        }

        .activity-time .price {
            color: #22c55e;
            font-weight: 600;
        }

        .activity-actions {
            display: flex;
            gap: 8px;
        }

        .btn-action {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-action.primary {
            background: #22c55e;
            color: white;
            border: none;
        }

        .btn-action.secondary {
            background: white;
            color: #64748b;
            border: 1px solid #e2e8f0;
        }

        .activity-image {
            width: 160px;
            height: 120px;
            border-radius: 12px;
            overflow: hidden;
            flex-shrink: 0;
        }

        .activity-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Travel Connector */
        .travel-connector {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0 12px 36px;
            font-size: 13px;
            color: #64748b;
        }

        .travel-connector i {
            color: #94a3b8;
        }

        /* Add Activity */
        .add-activity {
            background: white;
            border: 2px dashed #e2e8f0;
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            margin-left: 36px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .add-activity:hover {
            border-color: #22c55e;
            background: #f0fdf4;
        }

        .add-activity i {
            width: 40px;
            height: 40px;
            background: #22c55e;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
        }

        .add-activity span {
            font-size: 14px;
            color: #64748b;
        }

        /* Right Sidebar */
        .right-sidebar {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .sidebar-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .sidebar-card h3 {
            font-size: 14px;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sidebar-card h3 i {
            color: #64748b;
        }

        .map-preview {
            height: 180px;
            background: #e0f2fe;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
        }

        .map-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .map-link {
            position: absolute;
            bottom: 12px;
            right: 12px;
            background: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            color: #22c55e;
            text-decoration: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .distance-bar {
            margin-top: 12px;
        }

        .distance-label {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: #64748b;
            margin-bottom: 6px;
        }

        .distance-track {
            height: 6px;
            background: #e2e8f0;
            border-radius: 999px;
            overflow: hidden;
        }

        .distance-fill {
            height: 100%;
            background: linear-gradient(90deg, #22c55e, #f97316);
            border-radius: 999px;
            width: 60%;
        }

        /* Tip Card */
        .tip-card {
            display: flex;
            gap: 12px;
        }

        .tip-icon {
            width: 40px;
            height: 40px;
            background: #dcfce7;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #22c55e;
            flex-shrink: 0;
        }

        .tip-content h4 {
            font-size: 12px;
            font-weight: 600;
            color: #22c55e;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .tip-content p {
            font-size: 13px;
            color: #64748b;
            line-height: 1.5;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
            }

            .left-sidebar,
            .right-sidebar {
                display: none;
            }
        }
    </style>
</head>

<body>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <a href="HP/index.html" class="logo">
                    <i class="fa-solid fa-sparkles"></i>
                    AI Travel Planner
                </a>
                <nav class="nav-links">
                    <a href="hotels.html">Explore</a>
                    <a href="#" class="active">Trips</a>
                    <a href="tripcart.html">My Cart</a>
                    <a href="#">Settings</a>
                </nav>
            </div>
            <div class="header-right">
                <div class="search-box">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" placeholder="Search destinations">
                </div>
                <div class="header-icons">
                    <button><i class="fa-solid fa-share-nodes"></i></button>
                    <button><i class="fa-solid fa-download"></i></button>
                </div>
                <div class="user-avatar"></div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">

        <!-- Left Sidebar -->
        <aside class="left-sidebar">
            <div class="itinerary-nav">
                <div class="nav-header">Your Itinerary</div>
                <div class="nav-subtitle" id="tripDaysLabel">7 DAYS IN FRANCE</div>

                <div class="day-nav-list" id="dayNavList">
                    <!-- Days will be dynamically inserted -->
                </div>

                <div class="nav-divider"></div>

                <div class="day-nav-item">
                    <i class="fa-solid fa-chart-pie"></i>
                    Trip Stats
                </div>
                <div class="day-nav-item">
                    <i class="fa-solid fa-receipt"></i>
                    Cost Breakdown
                </div>
            </div>

            <div class="price-card">
                <div class="price-header">
                    <span class="price-label">TOTAL PRICE</span>
                    <span class="savings-badge">SAVING 12%</span>
                </div>
                <div class="price-amount" id="totalPrice">₹1,452 <span>/guests</span></div>
                <div class="price-details">Includes 12 activities, 3 hotel stays, and local transport.</div>
                <button class="btn-book">Book All Activities</button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">

            <!-- Trip Header -->
            <div class="trip-header">
                <div>
                    <h1 class="trip-title" id="tripTitle">7 Days in Paris & Lyon</h1>
                    <div class="trip-meta">
                        <span><i class="fa-regular fa-calendar"></i> <span id="tripDates">Oct 12 - Oct 18</span></span>
                        <span><i class="fa-solid fa-users"></i> <span id="guestCountDisplay">2</span> Travelers</span>
                    </div>
                </div>
                <button class="btn-export" onclick="window.print()">
                    <i class="fa-solid fa-file-pdf"></i>
                    Export PDF
                </button>
            </div>

            <!-- Days Timeline -->
            <div id="daysContainer">
                <!-- Days will be dynamically inserted -->
            </div>

        </main>

        <!-- Right Sidebar -->
        <aside class="right-sidebar">
            <div class="sidebar-card">
                <h3><i class="fa-solid fa-map"></i> Live Map</h3>
                <div class="map-preview">
                    <img src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/2.3522,48.8566,12,0/300x180?access_token=pk.placeholder"
                        alt="Map" onerror="this.style.display='none'">
                    <a href="#" class="map-link"><i class="fa-solid fa-arrow-up-right-from-square"></i> Open Full
                        Map</a>
                </div>
                <div class="distance-bar">
                    <div class="distance-label">
                        <span>Daily Distance</span>
                        <span>4.2km</span>
                    </div>
                    <div class="distance-track">
                        <div class="distance-fill"></div>
                    </div>
                </div>
            </div>

            <div class="sidebar-card">
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="fa-solid fa-leaf"></i>
                    </div>
                    <div class="tip-content">
                        <h4>Sustainable Travel Tip</h4>
                        <p>Using the Metro instead of ride-shares today saves approximately 4.5kg of CO2 emissions.</p>
                    </div>
                </div>
            </div>
        </aside>

    </div>

    <script src="database.js"></script>
    <script src="app.js"></script>
    <script>
        // Generate itinerary from cart
        function generateItinerary() {
            const cart = TripPlanner.getCart();
            const tripData = TripPlanner.getTripData();
            const days = tripData.duration || 7;

            // Update header info
            document.getElementById('tripTitle').textContent = `${days} Days in ${tripData.destination || 'Paris & Lyon'}`;
            document.getElementById('tripDaysLabel').textContent = `${days} DAYS IN ${(tripData.destination || 'FRANCE').toUpperCase()}`;

            if (tripData.startDate && tripData.endDate) {
                const start = new Date(tripData.startDate);
                const end = new Date(tripData.endDate);
                const options = { month: 'short', day: 'numeric' };
                document.getElementById('tripDates').textContent =
                    `${start.toLocaleDateString('en-US', options)} - ${end.toLocaleDateString('en-US', options)}`;
            }

            // Calculate costs
            const travelers = tripData.travelers || 1;
            let hotelsTotal = 0;
            let activitiesTotal = 0;
            cart.hotels.forEach(h => hotelsTotal += h.price * (h.nights || days));
            cart.activities.forEach(a => activitiesTotal += a.price * travelers);
            cart.restaurants.forEach(r => activitiesTotal += r.price);
            const total = hotelsTotal + activitiesTotal;
            document.getElementById('totalPrice').innerHTML = `₹${total.toLocaleString()} <span>/${travelers} ${travelers > 1 ? 'guests' : 'guest'}</span>`;
            document.getElementById('guestCountDisplay').textContent = travelers;

            // Generate day navigation
            const dayNavList = document.getElementById('dayNavList');
            dayNavList.innerHTML = '';
            for (let i = 0; i < days; i++) {
                const dayNav = document.createElement('div');
                dayNav.className = `day-nav-item ${i === 0 ? 'active' : ''}`;
                dayNav.innerHTML = `<i class="fa-regular fa-calendar"></i> Day ${i + 1}: ${getDayTitle(i)}`;
                dayNavList.appendChild(dayNav);
            }

            // Generate day sections
            const daysContainer = document.getElementById('daysContainer');
            daysContainer.innerHTML = '';

            for (let i = 0; i < days; i++) {
                const daySection = createDaySection(i, cart, tripData);
                daysContainer.appendChild(daySection);
            }
        }

        function getDayTitle(dayIndex) {
            const titles = ['Arrival & City Views', 'Art & History', 'Versailles Day Trip', 'Local Exploration', 'Food Tour', 'Shopping & Culture', 'Departure'];
            return titles[dayIndex % titles.length];
        }

        function createDaySection(dayIndex, cart, tripData) {
            const section = document.createElement('div');
            section.className = 'day-section';

            const date = new Date();
            if (tripData.startDate) {
                date.setTime(new Date(tripData.startDate).getTime() + (dayIndex * 24 * 60 * 60 * 1000));
            } else {
                date.setDate(date.getDate() + dayIndex);
            }
            const dateStr = date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });

            section.innerHTML = `
                <div class="day-header">
                    <div class="day-number">${dayIndex + 1}</div>
                    <div class="day-info">
                        <h2>Day ${dayIndex + 1}: ${getDayTitle(dayIndex)}</h2>
                        <p>${dateStr}</p>
                    </div>
                </div>
                <div class="timeline" id="timeline-${dayIndex}">
                    ${generateTimelineItems(dayIndex, cart)}
                    <div class="add-activity">
                        <i class="fa-solid fa-plus"></i>
                        <span>Add an activity to Day ${dayIndex + 1}</span>
                    </div>
                </div>
            `;

            return section;
        }

        function generateTimelineItems(dayIndex, cart) {
            let html = '';

            // Add hotel for first day
            if (dayIndex === 0 && cart.hotels.length > 0) {
                const hotel = cart.hotels[0];
                html += createActivityCard('hotel', hotel.name, hotel.location, '03:00 PM - Check-in', hotel.price, hotel.image);
            }

            // Add activity for this day
            const travelers = TripPlanner.getTripData().travelers || 1;
            if (cart.activities[dayIndex]) {
                const activity = cart.activities[dayIndex];
                html += `<div class="travel-connector"><i class="fa-solid fa-person-walking"></i> 15 min walk to ${activity.name}</div>`;
                html += createActivityCard('sightseeing', activity.name, activity.location, '09:00 AM - 12:00 PM', activity.price * travelers, activity.image);
            } else if (cart.activities.length > 0) {
                const activity = cart.activities[0];
                html += createActivityCard('sightseeing', activity.name, activity.location, '10:00 AM - 02:00 PM', activity.price * travelers, activity.image);
            }

            // Add restaurant
            if (cart.restaurants.length > 0) {
                const restaurant = cart.restaurants[0];
                html += `<div class="travel-connector"><i class="fa-solid fa-train-subway"></i> 20 min Metro to restaurant area</div>`;
                html += createActivityCard('dining', restaurant.name, restaurant.location, '12:30 PM - 01:45 PM', restaurant.price, restaurant.image);
            }

            return html;
        }

        function createActivityCard(type, title, location, time, price, image) {
            const badges = {
                hotel: '<span class="badge badge-sightseeing">ACCOMMODATION</span>',
                sightseeing: '<span class="badge badge-sightseeing">SIGHTSEEING</span><span class="badge badge-high-rated">HIGH RATED</span>',
                dining: '<span class="badge badge-dining">DINING</span>'
            };

            return `
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="activity-card">
                        <div class="activity-content">
                            <div class="activity-badges">
                                ${badges[type] || badges.sightseeing}
                            </div>
                            <h3 class="activity-title">${title}</h3>
                            <div class="activity-time">
                                <i class="fa-regular fa-clock"></i> ${time}
                                <span class="price">₹${price.toLocaleString()}</span>
                            </div>
                            <div class="activity-actions">
                                <button class="btn-action ${type === 'dining' ? 'primary' : 'secondary'}">
                                    <i class="fa-solid fa-circle-info"></i> Details
                                </button>
                                <button class="btn-action secondary">
                                    <i class="fa-solid fa-location-dot"></i> Map
                                </button>
                            </div>
                        </div>
                        <div class="activity-image">
                            <img src="${image || 'https://images.unsplash.com/photo-1499856871958-5b9627545d1a?w=300'}" alt="${title}">
                        </div>
                    </div>
                </div>
            `;
        }

        // Check if cart has items
        if (TripPlanner.getCartItemCount() === 0) {
            document.getElementById('daysContainer').innerHTML = `
                <div class="activity-card" style="text-align: center; padding: 60px;">
                    <i class="fa-solid fa-suitcase-rolling" style="font-size: 48px; color: #94a3b8; margin-bottom: 16px;"></i>
                    <h3 style="margin-bottom: 8px;">No items in your trip</h3>
                    <p style="color: #64748b; margin-bottom: 24px;">Add hotels and activities to generate your itinerary.</p>
                    <a href="hotels.html" class="btn-action primary" style="display: inline-flex; padding: 12px 24px;">
                        <i class="fa-solid fa-compass"></i> Explore Recommendations
                    </a>
                </div>
            `;
        } else {
            generateItinerary();
        }
    </script>

</body>

</html>